<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pemesanan - Cup&Cone Soft Ice Cream Shop</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <section class="header">
        <a href="index.html" class="logo"> <i class="fas fa-ice-cream"></i> Cup&Cone Soft Ice Cream Shop </a>
        <nav class="navbar">
            <a href="index.html">home</a>
            <a href="aboutus.html">Tentang Kami</a>
            <a href="menu.html">menu</a>
            <a href="gallery.html">Galeri</a>
            <a href="reviews.html">Ulasan</a>
            <a href="login.html">Beli</a>
        </nav>

        <div id="menu-btn" class="fas fa-bars"></div>
    </section>

    <div class="container">
        <div class="products" id="product-list">
            <!-- Produk akan ditambahkan di sini oleh JavaScript -->
        </div>
        <div class="cart">
            <h2>Keranjang Belanja</h2>
            <div id="cart-items">
                <!-- Item keranjang akan ditambahkan di sini oleh JavaScript -->
            </div>
            <div class="checkout">
                <h3>Total: <span id="total-price">0</span> IDR</h3>
                <button id="checkout-button">Checkout</button>
            </div>
        </div>
    </div>

    <!-- Modal Checkout -->
    <div id="checkout-modal" class="modal">
        <div class="modal-content">
            <span class="close" id="close-modal">&times;</span>
            <h2>Checkout</h2>
            <form id="checkout-form">
                <label for="fullname">Nama Lengkap:</label>
                <input type="text" id="fullname" required placeholder="Masukkan nama lengkap">
                <label for="address">Alamat Pengiriman:</label>
                <input type="text" id="address" required placeholder="Masukkan alamat">
                <label for="phone">Nomor HP:</label>
                <input type="text" id="phone" required placeholder="Masukkan nomor HP">
                <label for="payment-method">Metode Pembayaran:</label>
                <select id="payment-method" required>
                    <option value="bank-transfer">Transfer Bank</option>
                    <option value="cod">COD</option>
                    <option value="ewallet">E-Wallet</option>
                </select>
                <h3>Ringkasan Pesanan</h3>
                <div id="order-summary"></div>
                <h3>Total: <span id="final-total"></span> IDR</h3>
                <button type="submit">Buat Pesanan</button>
            </form>
        </div>
    </div>
             <!-- footer -->

             <section class="footer">

                <div class="icons-container">
        
                    <div class="icons">
                        <i class="fas fa-map"></i>
                        <h3>Alamat</h3>
                        <p>Jl. Mawar Tloyo, RT.02/RW.08, Tloyo, Kb. Dalem Kidul <br>
                            Prambanan, Klaten <br>
                            Jawa Tengah, Indonesia</p>
                    </div>
        
                    <div class="icons">
                        <i class="fas fa-phone"></i>
                        <h3>phone</h3>
                        <p>0896-7423-9825</p>
                        <p>0896-7423-9825</p>
                    </div>
        
                    <div class="icons">
                        <i class="fas fa-envelope"></i>
                        <h3>email</h3>
                        <a href="#" class="link">haswijaya@yahoo.com</a>
                    </div>
        
                    <div class="icons">
                        <i class="fas fa-clock"></i>
                        <h3>Jam Buka</h3>
                        <p>Senin Tutup <br> Selasa - Minggu: 14:30 - 21:00 WIB</p>
                    </div>
        
                </div>
        
                <div class="share">
                    <a href="#" class="fab fa-facebook-f"></a>
                    <a href="#" class="fab fa-instagram"></a>
                </div>
        
                <!--<div class="credit">created by <span>Hasan Wijaya 20.12.1568</span> | all right reserved!</div>-->
        
            </section>
            <!-- footer -->


                <!-- swiper -->
    <script src="https://unpkg.com/swiper@7/swiper-bundle.min.js"></script>

    <!-- lightgallery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery-js/1.4.0/js/lightgallery.min.js"></script>
    
    <!-- custom js -->
    <script src="js/script.js"></script>

    <script>
        lightGallery(document.querySelector('.gallery .gallery-container'));
    </script>

    <script>
        const products = [
            { id: 1, name: "Almond Chocolate Rain", price: 17000, image: "images/Almond Chocolate Rain.png" },
            { id: 2, name: "Planet Of Sadness", price: 16500, image: "images/Planet Of Sadness.jpg" },
            { id: 3, name: "Mix Happy", price: 18000, image: "images/Mix Happy.jpg" },
            { id: 4, name: "Chocochips Rain", price: 15500, image: "images/Chocochips Rain.jpg" },
            { id: 5, name: "Almond Cheese", price: 17000, image: "images/Almond Cheese.jpg" },
            { id: 6, name: "Marsmallow Choco", price: 16500, image: "images/Marsmallow Choco.jpg" },
            { id: 7, name: "Mango Snowy", price: 14000, image: "images/Mango Snowy.jpg" },
            { id: 8, name: "Kiwi Snowy", price: 14000, image: "images/Kiwi Snowy.jpg" },
            { id: 9, name: "Brown Sugar Snowy", price: 15000, image: "images/Brown Sugar Snowy.jpg" },
            { id: 10, name: "Chocoball Strawberry", price: 15500, image: "images/Chocoball Strawberry.jpg" },
            { id: 11, name: "Chocochips Green Tea", price: 15000, image: "images/Chocochips Green Tea.jpg" },
            { id: 12, name: "City Of Stars", price: 17000, image: "images/City Of Stars.jpg" },
            { id: 13, name: "Froot Loops Choco", price: 16500, image: "images/Froot Loops Choco.jpg" },
            { id: 14, name: "Peanut Green Tea", price: 15500, image: "images/Peanut Green Tea.jpg" },
            { id: 15, name: "Peanut Flakes", price: 15000, image: "images/Peanut Flakes.jpg" },
            { id: 16, name: "Strawberry Snowy", price: 14000, image: "images/Strawberry Snowy.jpg" }
        ];

        let cart = [];

        function renderProducts() {
            const productList = document.getElementById('product-list');
            productList.innerHTML = ''; // Clear existing products to prevent duplicates
            products.forEach(product => {
                const productDiv = document.createElement('div');
                productDiv.className = 'product';
                productDiv.innerHTML = `
                    <img src="${product.image}" alt="${product.name}">
                    <h3>${product.name}</h3>
                    <p>${product.price} IDR</p>
                    <button onclick="addToCart(${product.id})">Tambah ke Keranjang</button>
                `;
                productList.appendChild(productDiv);
            });
        }

        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const cartItem = cart.find(item => item.id === productId);
            if (cartItem) {
                cartItem.quantity++;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            updateCart();
        }

        function updateCart() {
            const cartItems = document.getElementById('cart-items');
            cartItems.innerHTML = '';
            let total = 0;
            cart.forEach(item => {
                const cartItemDiv = document.createElement('div');
                cartItemDiv.className = 'cart-item';
                cartItemDiv.innerHTML = `
                    <span>${item.name} (${item.quantity})</span>
                    <span>${item.price * item.quantity} IDR</span>
                    <button onclick="changeQuantity(${item.id}, -1)">-</button>
                    <button onclick="changeQuantity(${item.id}, 1)">+</button>
                `;
                cartItems.appendChild(cartItemDiv);
                total += item.price * item.quantity;
            });
            document.getElementById('total-price').innerText = total;
        }

        function changeQuantity(productId, delta) {
            const cartItem = cart.find(item => item.id === productId);
            if (cartItem) {
                cartItem.quantity += delta;
                if (cartItem.quantity <= 0) {
                    cart = cart.filter(item => item.id !== productId);
                }
                updateCart();
            }
        }

        document.getElementById('checkout-button').addEventListener('click', function() {
            document.getElementById('checkout-modal').style.display = 'block';
            const orderSummary = document.getElementById('order-summary');
            orderSummary.innerHTML = '';
            cart.forEach(item => {
                orderSummary.innerHTML += `<p>${item.name} (${item.quantity}) - ${item.price * item.quantity} IDR</p>`;
            });
            document.getElementById('final-total').innerText = document.getElementById('total-price').innerText;
        });

        document.getElementById('close-modal').addEventListener('click', function() {
            document.getElementById('checkout-modal').style.display = 'none';
        });

        document.getElementById('checkout-form').addEventListener('submit', function(event) {
            event.preventDefault();
            alert('Pesanan Berhasil Dibuat!');
            cart = [];
            updateCart();
            document.getElementById('checkout-modal').style.display = 'none';
        });

        // Render products on page load
        renderProducts();
    </script>
</body>
</html>
